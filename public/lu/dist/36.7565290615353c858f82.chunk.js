webpackJsonp([36],{265:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(493),s=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);var o=a(883),d=a.n(o),r=a(3),l=r(s.a,d.a,!1,null,null,null);l.options.__file="src/views/news-system/advertisement-positions/list.vue",e.default=l.exports},493:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(26),s=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={data:function(){var t=this;return{loading:!1,search:{},tableStatus:{type:[]},feeds:{data:[],total:0,current_page:1,per_page:10},addEditAdvertisementPositionModal:{show:!1,saveLoading:!1},ruleAddEditPermission:{name:[{required:!0,message:"请填写权限名称",trigger:"blur"}],guard_name:[{required:!0,message:"请填写看守器",trigger:"blur"}]},addEditPermissionForm:{id:0,name:"",guard_name:"",description:""},dataList:[],columns:[{title:"ID",key:"id",sortable:!0,width:100},{title:"广告位名称",key:"name"},{title:"广告位描述",key:"description"},{title:"类型",key:"type"},{title:"创建时间",key:"created_at",sortable:!0},{title:"更新时间",key:"created_at"},{title:"操作",render:function(e,a){var i=t;return e("div",[e("Button",{props:{type:"success",size:"small"},on:{click:function(){i.addEditPermissionForm=i.dataList[a.index],i.addEditAdvertisementPositionModal.show=!0}}},"Edit"),e("Poptip",{props:{confirm:!0,title:"您确定要删除「"+a.row.name+"」权限？",transfer:!0},on:{"on-ok":function(){i.deleteBtn(a.row.id,a.index)}}},[e("Button",{style:{margin:"0 5px"},props:{type:"error",size:"small",placement:"top"}},"删除")])])}}]}},created:function(){var t=this;t.getList(t.feeds.current_page),t.getTableStatus()},methods:{getTableStatus:function(){var t=this;t.$util.ajax.get("/common_get_table_status/advertisement_positions/type").then(function(e){var a=e.data;t.tableStatus.type=a.data},function(t){})},handleOnPageChange:function(t){this.getList(t)},cleanModal:function(){this.addEditPermissionForm={id:0,name:"",guard_name:"",description:""}},handleSubmit:function(){var t=this;t.$refs.addEditPermissionForm.validate(function(e){e&&(t.addEditAdvertisementPositionModal.saveLoading=!0,t.$util.ajax.post("/admin/permissions",t.addEditPermissionForm).then(function(e){var a=e.data;t.$Notice.success({title:a.message}),t.getList(),t.addEditAdvertisementPositionModal.saveLoading=!1,t.addEditAdvertisementPositionModal.show=!1},function(e){t.$Notice.warning({title:"出错了",desc:e.message}),t.addEditAdvertisementPositionModal.saveLoading=!1}))})},cancelEditPass:function(){var t=this;t.addEditAdvertisementPositionModal.show=!1,t.addEditAdvertisementPositionModal.saveLoading=!1,t.cleanModal()},addBtn:function(){this.cleanModal(),this.addEditAdvertisementPositionModal.show=!0},getList:function(t){var e=this;e.loading=!0,e.feeds.current_page=t,e.$util.ajax.get("/admin/advertisement_positions?page="+t+"&per_page="+e.feeds.per_page+"&search_data="+(0,s.default)(e.search)).then(function(t){var a=t.data;e.feeds.data=a.data,e.feeds.total=a.meta.total,e.loading=!1},function(t){e.$Notice.warning({title:"出错了",desc:t.message}),e.loading=!1})},deleteBtn:function(t,e){var a=this;a.$util.ajax.delete("/admin/permissions/"+t).then(function(t){var i=t.data;a.dataList.splice(e,1),a.$Notice.success({title:i.message})},function(t){a.$Notice.warning({title:"出错了",desc:t.message})})}}}},883:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"news_system-advertisement_positions-list"}},[a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"end",gutter:16}},[a("Col",{attrs:{span:"3"}},[a("Input",{attrs:{icon:"search",placeholder:"请输入广告位名称..."},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}})],1),t._v(" "),a("Col",{attrs:{span:"3"}},[a("Select",{attrs:{placeholder:"请选择广告位类型"},model:{value:t.search.type,callback:function(e){t.$set(t.search,"type",e)},expression:"search.type"}},[a("Option",{key:"",attrs:{value:""}},[t._v("全部")]),t._v(" "),t._l(t.tableStatus.type,function(e,i){return a("Option",{key:i,attrs:{value:i}},[t._v(t._s(e))])})],2)],1),t._v(" "),a("Col",{attrs:{span:"2"}},[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:function(e){t.getList()}}},[t._v("Search")])],1),t._v(" "),a("Col",{attrs:{span:"2"}},[a("Button",{attrs:{type:"success",icon:"plus"},on:{click:function(e){t.addBtn()}}},[t._v("Add")])],1)],1),t._v(" "),a("br"),t._v(" "),a("Row",[a("Table",{attrs:{border:"",columns:t.columns,data:t.feeds.data,loading:t.loading}}),t._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{staticClass:"paging",attrs:{total:t.feeds.total,current:t.feeds.current_page,"page-size":t.feeds.per_page,"show-elevator":"","show-total":""},on:{"on-change":t.handleOnPageChange}})],1)])],1),t._v(" "),a("Modal",{attrs:{closable:!1,"mask-closable":!1,width:500},model:{value:t.addEditAdvertisementPositionModal.show,callback:function(e){t.$set(t.addEditAdvertisementPositionModal,"show",e)},expression:"addEditAdvertisementPositionModal.show"}},[a("h3",{staticStyle:{color:"#2D8CF0"},attrs:{slot:"header"},slot:"header"},[t._v("编辑权限")]),t._v(" "),a("Form",{ref:"addEditPermissionForm",attrs:{model:t.addEditPermissionForm,"label-width":100,"label-position":"right",rules:t.ruleAddEditPermission}},[a("FormItem",{attrs:{label:"权限名称",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入权限名称"},model:{value:t.addEditPermissionForm.name,callback:function(e){t.$set(t.addEditPermissionForm,"name",e)},expression:"addEditPermissionForm.name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"看守器",prop:"guard_name"}},[a("Input",{attrs:{placeholder:"请输入看守器"},model:{value:t.addEditPermissionForm.guard_name,callback:function(e){t.$set(t.addEditPermissionForm,"guard_name",e)},expression:"addEditPermissionForm.guard_name"}})],1),t._v(" "),a("FormItem",{attrs:{label:"权限描述",prop:"description"}},[a("Input",{attrs:{placeholder:"请输入权限描述"},model:{value:t.addEditPermissionForm.description,callback:function(e){t.$set(t.addEditPermissionForm,"description",e)},expression:"addEditPermissionForm.description"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:t.cancelEditPass}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary",loading:t.addEditAdvertisementPositionModal.saveLoading},on:{click:t.handleSubmit}},[t._v("\n                保存\n            ")])],1)],1)],1)},s=[];i._withStripped=!0;var n={render:i,staticRenderFns:s};e.default=n}});