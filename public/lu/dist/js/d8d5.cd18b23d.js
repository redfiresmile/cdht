(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["d8d5"],{d8d5:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"iview-time-line"},[a("Row",{attrs:{gutter:20}},[a("i-col",{attrs:{span:"12"}},[a("Card",{attrs:{shadow:""}},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"ios-repeat"}}),t._v("\n          Lucms 版本更新记录\n        ")],1),a("a",{attrs:{slot:"extra",href:"#"},on:{click:function(e){return e.preventDefault(),t.pushNewVersion(e)}},slot:"extra"},[a("Icon",{attrs:{type:"ios-paper-plane-outline"}}),t._v("\n          发布新版本\n        ")],1),t.versionList?a("div",[a("Timeline",t._l(t.versionList,function(e,o){return a("TimelineItem",[a("a",{staticClass:"time",attrs:{href:e.download_url,target:"_blank"}},[t._v("V"+t._s(e.version))]),a("br"),a("h4",[t._v(t._s(e.title))]),a("Icon",{attrs:{type:"md-time"}}),t._v(t._s(e.created_at)+"\n              "),a("br"),a("p",{staticClass:"content"},[a("parse",{attrs:{content:e.content.raw}})],1)],1)})),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",[a("Page",{staticClass:"paging",attrs:{simple:"",total:t.feeds.total,current:t.feeds.current_page,"page-size":t.feeds.per_page},on:{"on-change":t.handleOnPageChange,"on-page-size-change":t.onPageSizeChange}})],1)])],1):a("p",{staticClass:"text-center"},[t._v("没有版本相关信息...")])])],1)],1),a("Modal",{attrs:{closable:!1,"mask-closable":!1,fullscreen:""},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[a("p",{attrs:{slot:"header"},slot:"header"},[t._v("发布新版本")]),a("Form",{ref:"formData",attrs:{model:t.formData,rules:t.rules,"label-position":"left","label-width":100}},[a("FormItem",{attrs:{label:"版本标题：",prop:"title"}},[a("Input",{attrs:{placeholder:"请输入版本标题"},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),a("FormItem",{attrs:{label:"版本号：",prop:"version"}},[a("Input",{attrs:{placeholder:"请输入版本号"},model:{value:t.formData.version,callback:function(e){t.$set(t.formData,"version",e)},expression:"formData.version"}}),a("input-helper",{attrs:{text:"如：1.0.0"}})],1),a("FormItem",{attrs:{label:"下载链接："}},[a("Input",{attrs:{placeholder:"请输入下载链接"},model:{value:t.formData.download_url,callback:function(e){t.$set(t.formData,"download_url",e)},expression:"formData.download_url"}})],1),a("FormItem",{attrs:{label:"版本描述："}},[a("markdown-editor",{attrs:{value:t.formData.content,cache:!0},model:{value:t.formData.content,callback:function(e){t.$set(t.formData,"content",e)},expression:"formData.content"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text"},on:{click:t.cancel}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.saveLoading},on:{click:t.newVersionExcute}},[t._v("保存 ")])],1)],1)],1)},n=[],r=(a("cadf"),a("551c"),a("097d"),a("66df")),s=function(){return r["a"].request({url:"api/admin/versions",method:"get"})},i=function(t){return r["a"].request({url:"api/admin/versions",data:t,method:"post"})},l=a("5e53"),c=a("2846"),u=a("9f69"),d={components:{MarkdownEditor:l["a"],InputHelper:u["a"],Parse:c["a"]},data:function(){return{feeds:{data:[],total:0,current_page:1,per_page:10},versionList:[],tableLoading:!1,saveLoading:!1,modalShow:!1,formData:{title:"",version:""},rules:{title:[{required:!0,message:"请填写版本标题",trigger:"blur"}],version:[{required:!0,message:"请填写版本号",trigger:"blur"}],content:[{required:!0,message:"请填写内容",trigger:"blur"}]}}},mounted:function(){this.getVersionListExcute()},methods:{handleOnPageChange:function(t){this.getTableDataExcute(t)},onPageSizeChange:function(t){this.feeds.per_page=t,this.getTableDataExcute(this.feeds.current_page)},pushNewVersion:function(){this.modalShow=!0},getVersionListExcute:function(){var t=this;t.tableLoading=!0,s().then(function(e){t.versionList=e.data,t.tableLoading=!1})},cancel:function(){this.saveLoading=!1,this.modalShow=!1},newVersionExcute:function(){var t=this;t.$refs.formData.validate(function(e){e&&(t.saveLoading=!0,i(t.formData).then(function(e){t.saveLoading=!1,t.modalShow=!1,t.$Notice.success({title:e.message}),t.getVersionListExcute()},function(e){t.saveLoading=!1}))})}}},m=d,p=a("66b7"),f=Object(p["a"])(m,o,n,!1,null,null,null);f.options.__file="system-version.vue";e["default"]=f.exports}}]);